import{s as u}from"./index-C0wbabnw.js";const p="item-images";async function h(t,a){const s=(await u.auth.getUser()).data.user;if(!s)throw new Error("Not authenticated");const r=t.name.split(".").pop(),o=`${s.id}/${a}/${Date.now()}.${r}`,{data:g,error:e}=await u.storage.from(p).upload(o,t,{cacheControl:"3600",upsert:!0});if(e)throw e;const{data:i}=u.storage.from(p).getPublicUrl(g.path);return i.publicUrl}function f(t,a=800){return new Promise((s,r)=>{const o=new FileReader;o.readAsDataURL(t),o.onload=g=>{var i;const e=new Image;e.src=(i=g.target)==null?void 0:i.result,e.onload=()=>{const c=document.createElement("canvas");let n=e.width,m=e.height;n>a&&(m=m*a/n,n=a),c.width=n,c.height=m;const l=c.getContext("2d");l==null||l.drawImage(e,0,0,n,m),c.toBlob(d=>{d?s(new File([d],t.name,{type:"image/jpeg"})):r(new Error("Failed to compress image"))},"image/jpeg",.8)},e.onerror=r},o.onerror=r})}export{f as compressImage,h as uploadItemImage};
//# sourceMappingURL=images-BIuFf1Sx.js.map
